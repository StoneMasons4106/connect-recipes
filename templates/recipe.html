{% extends "base.html" %} {% block content %}

<!-- ======= Header ======= -->
<header id="header" class="fixed-top recipe-header">
  <div class="container d-flex align-items-center">
    <h1 class="logo me-auto">
      <a href="{{ url_for('index') }}">Connect Recipes</a>
    </h1>

    <nav id="navbar" class="navbar">
      <ul>
        <li>
          <a class="nav-link scrollto active" href="{{ url_for('index') }}"
            >Home</a
          >
        </li>
        <li>
          <a class="nav-link scrollto" href="{{ url_for('index') }}#about"
            >About</a
          >
        </li>
        <li>
          <a class="nav-link scrollto" href="{{ url_for('index') }}#search"
            >Search</a
          >
        </li>
        {% if session.user %}
        <li>
          <a class="nav-link" href="{{ url_for('new_recipe') }}"
            >Add A Recipe</a
          >
        </li>
        <li>
          <a class="nav-link" href="{{ url_for('profile') }}">My Profile</a>
        </li>
        <li><a class="getstarted" href="{{ url_for('logout') }}">Logout</a></li>
        {% else %}
        <li><a class="getstarted" href="{{ url_for('login') }}">Login</a></li>
        <li>
          <a class="getstarted" href="{{ url_for('register') }}">Register</a>
        </li>
        {% endif %}
      </ul>
      <i class="bi bi-list mobile-nav-toggle"></i>
    </nav>
    <!-- .navbar -->
  </div>
</header>
<!-- End Header -->

{% with messages = get_flashed_messages() %} {% if messages %} {% for message in
  messages %}
  <div
    id="save-recipe-flash"
    class="alert alert-success alert-dismissible fade show flashes"
    role="alert"
  >
    <strong>{{ message }}</strong>
    <button
      type="button"
      class="btn-close"
      data-bs-dismiss="alert"
      aria-label="Close"
    ></button>
  </div>
  {% endfor %} {% endif %} {% endwith %}

<!-- Recipe -->

<section id="recipe" class="section-bg cards">
  <div class="container-fluid" data-aos="fade-up">
    {% if recipe %}
    <div class="recipe-row row justify-content-center">
      <div class="col-lg-6 paper">
        <div class="lines"></div>
        <ul class="nolist list">
          <img
            src="{{ recipe.recipe_picture_url }}"
            alt="{{ recipe.name }}"
            class="img-fluid cards-image recipe-image"
          />
          <li><strong>{{ recipe.name }}</strong></li>
          <li><strong>Ingredients:</strong></li>
          {% set ingredients = recipe.ingredients.split('\r\n') %} {% for
          ingredient in ingredients%}
          <li>{{ ingredient }}</li>
          {% endfor %}
          <li><strong>Prep Work:</strong></li>
          {% set prep_work = recipe.prep_work.split('\r\n') %} {% for prep in
          prep_work%}
          <li>{{ prep }}</li>
          {% endfor %}
          <li><strong>Cooking Instructions:</strong></li>
          {% set cooking_instructions =
          recipe.cooking_instructions.split('\r\n') %} {% for
          cooking_instruction in cooking_instructions%}
          <li>{{ cooking_instruction }}</li>
          {% endfor %}
          <li><strong>Serving Instructions:</strong></li>
          {% set serving_instructions =
          recipe.serving_instructions.split('\r\n') %} {% for
          serving_instruction in serving_instructions%}
          <li>{{ serving_instruction }}</li>
          {% endfor %}
          <li><strong>Recipe Owner:</strong></li>
          <li>{{ recipe.owner }}</li>
          <li><strong>Tags:</strong></li>
          <li>
            {% for tag in recipe.tags %} {{ tag }} {% if loop.index !=
            loop.length %} , {% endif %} {% endfor %}
          </li>
        </ul>
      </div>
    </div>
    <div class="row justify-content-center">
      <div class="col-lg-6">
        <div class="save-recipe">
          {% if saved == 1%}
          <form
            action="{{ url_for('recipes', recipe_id=recipe._id) }}"
            method="post"
          >
            <button
              id="save-recipe-button"
              class="getstarted saved"
              type="submit"
            >
              <i class="far fa-save"></i> Saved
            </button>
          </form>
          {% elif saved == 0 %}
          <form
            action="{{ url_for('recipes', recipe_id=recipe._id) }}"
            method="post"
          >
            <button id="save-recipe-button" class="getstarted" type="submit">
              <i class="far fa-save"></i> Save
            </button>
          </form>
          {% endif %}
        </div>
      </div>
    </div>

    {% else %}

    <div class="row justify-content-center">
      <div class="col-lg-4 no-content">
        <i class="far fa-meh"></i>
        <p>Oops! Looks like there's no recipe with this ID...</p>
        <p>
          Try adding a recipe <a href="{{ url_for('new_recipe') }}">here!</a>
        </p>
      </div>
    </div>

    {% endif %}
  </div>
</section>

<!-- End Recipe -->

{% endblock %}
